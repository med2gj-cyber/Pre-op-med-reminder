<!DOCTYPE html>
<html lang="th">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>à¸šà¸±à¸™à¸—à¸¶à¸à¸«à¸¢à¸¸à¸”à¸¢à¸² - Pre-op Med Reminder</title>
Â  Â  <style>
Â  Â  Â  Â  body { font-family: 'Sarabun', sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
Â  Â  Â  Â  .container { background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; width: 100%; max-width: 400px; }
Â  Â  Â  Â  .med-box { background: #e7f3ff; padding: 15px; border-radius: 12px; margin: 20px 0; border: 1px solid #007bff; }
Â  Â  Â  Â  .consent-text { text-align: left; font-size: 0.9rem; color: #555; line-height: 1.6; background: #fafafa; padding: 15px; border-radius: 10px; border-left: 4px solid #28a745; margin-bottom: 20px; }
Â  Â  Â  Â  button { background: #28a745; color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer; width: 100%; transition: 0.3s; margin-top: 10px; }
Â  Â  Â  Â  .hidden { display: none; }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <div id="consentSection">
Â  Â  Â  Â  Â  Â  <h2 style="color: #28a745;">ğŸ›¡ï¸ à¸à¸²à¸£à¸„à¸¸à¹‰à¸¡à¸„à¸£à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥</h2>
Â  Â  Â  Â  Â  Â  <div class="consent-text">
Â  Â  Â  Â  Â  Â  Â  Â  <b>à¸™à¹‚à¸¢à¸šà¸²à¸¢à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§:</b><br>
Â  Â  Â  Â  Â  Â  Â  Â  - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸™à¸µà¹‰à¹ƒà¸Šà¹‰à¹€à¸à¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™<br>
Â  Â  Â  Â  Â  Â  Â  Â  - à¸£à¸°à¸šà¸šà¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸šà¸¸à¸„à¸„à¸¥à¸¥à¸‡à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œ
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button onclick="acceptConsent()">à¸¢à¸´à¸™à¸¢à¸­à¸¡à¹à¸¥à¸°à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸•à¹ˆà¸­</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="mainSection" class="hidden">
Â  Â  Â  Â  Â  Â  <h2 style="color: #007bff;">ğŸ“Œ à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™</h2>
Â  Â  Â  Â  Â  Â  <div class="med-box">
Â  Â  Â  Â  Â  Â  Â  Â  <p>à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸</p>
Â  Â  Â  Â  Â  Â  Â  Â <p> à¸à¸£à¸“à¸µà¹€à¸¥à¸·à¹ˆà¸­à¸™à¸™à¸±à¸”à¸œà¹ˆà¸²à¸•à¸±à¸”Â 
Â  Â  Â  Â  Â  à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­à¸«à¸™à¹ˆà¸§à¸¢à¸­à¸²à¸¢à¸¸à¸£à¸à¸£à¸£à¸¡ 2Â 
Â  Â  à¹‚à¸—à¸£ 02-849-6600 à¹€à¸à¸·à¹ˆà¸­à¸›à¸£à¸±à¸šà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸à¸²à¸£à¸«à¸¢à¸¸à¸”à¸¢à¸²</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p>à¸Šà¸·à¹ˆà¸­à¸¢à¸²à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸«à¸¢à¸¸à¸”:</p>
Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="displayMed" style="color: #d9534f;">-</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p>à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆà¸§à¸±à¸™à¸—à¸µà¹ˆ (à¹€à¸§à¸¥à¸² 07:00 à¸™.):</p>
Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="displayDate">-</h3>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button onclick="generateICS()">ğŸ“… à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡à¸›à¸à¸´à¸—à¸´à¸™à¸¡à¸·à¸­à¸–à¸·à¸­</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  const urlParams = new URLSearchParams(window.location.search);
Â  Â  Â  Â  const med = urlParams.get('m') || "à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸Šà¸·à¹ˆà¸­à¸¢à¸²";
Â  Â  Â  Â  const dateRaw = urlParams.get('d') || "";

Â  Â  Â  Â  function acceptConsent() {
Â  Â  Â  Â  Â  Â  document.getElementById('consentSection').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('mainSection').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('displayMed').innerText = med;
Â  Â  Â  Â  Â  Â  if(dateRaw.length === 8) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('displayDate').innerText = `${dateRaw.substring(6,8)}/${dateRaw.substring(4,6)}/${dateRaw.substring(0,4)}`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function generateICS() {
Â  Â  const icsMsg = [
Â  Â  Â  Â  "BEGIN:VCALENDAR",
Â  Â  Â  Â  "VERSION:2.0",
Â  Â  Â  Â  "PRODID:-//Med Reminder//TH",
Â  Â  Â  Â  "BEGIN:VEVENT",
Â  Â  Â  Â  `SUMMARY:à¸«à¸¢à¸¸à¸”à¸¢à¸² ${med} (à¸à¹ˆà¸­à¸™à¸œà¹ˆà¸²à¸•à¸±à¸”)`,
Â  Â  Â  Â  `DTSTART;VALUE=DATE:${dateRaw}`,
Â  Â  Â  Â  `DTEND;VALUE=DATE:${dateRaw}`,
Â  Â  Â  Â  `DESCRIPTION:à¸à¸£à¸¸à¸“à¸²à¸‡à¸”à¸—à¸²à¸™à¸¢à¸² ${med} à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆà¸§à¸±à¸™à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸•à¹‰à¸™à¹„à¸›à¹€à¸à¸·à¹ˆà¸­à¹€à¸•à¸£à¸µà¸¢à¸¡à¸•à¸±à¸§à¸œà¹ˆà¸²à¸•à¸±à¸”`,
Â  Â  Â  Â  "BEGIN:VALARM",
Â  Â  Â  Â  "TRIGGER:-PT16H",
Â  Â  Â  Â  "ACTION:DISPLAY",
Â  Â  Â  Â  "DESCRIPTION:Reminder",
Â  Â  Â  Â  "END:VALARM",
Â  Â  Â  Â  "END:VEVENT",
Â  Â  Â  Â  "END:VCALENDAR"
Â  Â  ].join("\n");

Â  Â  const blob = new Blob([icsMsg], { type: 'text/calendar;charset=utf-8' });
Â  Â  const url = window.URL.createObjectURL(blob);
Â  Â Â 
Â  Â  // à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œà¸Šà¸±à¹ˆà¸§à¸„à¸£à¸²à¸§à¹à¸¥à¸°à¸ªà¸±à¹ˆà¸‡à¸„à¸¥à¸´à¸
Â  Â  const link = document.createElement('a');
Â  Â  link.href = url;
Â  Â  link.setAttribute('download', 'med-alert.ics');
Â  Â  document.body.appendChild(link); // à¹€à¸à¸´à¹ˆà¸¡à¹€à¸‚à¹‰à¸²à¹„à¸›à¹ƒà¸™à¸«à¸™à¹‰à¸²à¸ˆà¸­à¸à¹ˆà¸­à¸™à¸„à¸¥à¸´à¸
Â  Â  link.click();
Â  Â  document.body.removeChild(link); // à¸¥à¸šà¸—à¸´à¹‰à¸‡à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸ªà¸£à¹‡à¸ˆ
Â  Â  window.URL.revokeObjectURL(url); // à¸„à¸·à¸™à¸„à¹ˆà¸²à¸„à¸§à¸²à¸¡à¸ˆà¸³
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>